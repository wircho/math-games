<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prime Numbers (Snakes & Ladders Style Game) - Math Games</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Prime Numbers (Snakes & Ladders Style Game)</h1>
    </header>

    <a href="index.html" class="back-link">‚Üê Back to games</a>

    <main>
        <section>
            <h2>How To Play</h2>
            <p>Set a starting number (for example, 5) and a target number (for example, 50). Players take turns:</p>
            <ul>
                <li><strong>Student's turn:</strong> Add any number from 1 to 9</li>
                <li><strong>Teacher's turn:</strong> Divide by any number that divides evenly (except by 1 or the number itself), or pass if no such divisor exists</li>
            </ul>
            <p>The student succeeds when they reach or surpass the target number.</p>
        </section>

        <section>
            <h2>Interactive Version</h2>
            <p class="disclaimer">While this interactive version lets you practice the game, these games are most valuable when played with a teacher or parent. The guidance, encouragement, and mathematical discussion that happens during play cannot be replaced by a screen. <strong>Teachers and parents are encouraged to try the interactive version as a way to familiarize themselves with the game before playing it with students.</strong></p>
            <noscript>
                <p style="color: #dc3545; font-weight: 600;">JavaScript is required to play this interactive game.</p>
            </noscript>
            <details>
                <summary>Show Interactive Game</summary>
                <div id="game-container">
                    <div class="interactive-game">
                        <div class="game-info">
                            <div class="target-display">
                                Target: <span id="target-number">100</span>
                            </div>
                            <div class="turn-display" id="turn-display">Student's turn</div>
                        </div>

                        <div id="current-number" class="circle interactive">0</div>

                        <div id="game-controls" class="game-controls">
                            <button class="game-btn student-btn add-btn" data-value="1">+1</button>
                            <button class="game-btn student-btn add-btn" data-value="2">+2</button>
                            <button class="game-btn student-btn add-btn" data-value="3">+3</button>
                            <button class="game-btn student-btn add-btn" data-value="4">+4</button>
                            <button class="game-btn student-btn add-btn" data-value="5">+5</button>
                            <button class="game-btn student-btn add-btn" data-value="6">+6</button>
                            <button class="game-btn student-btn add-btn" data-value="7">+7</button>
                            <button class="game-btn student-btn add-btn" data-value="8">+8</button>
                            <button class="game-btn student-btn add-btn" data-value="9">+9</button>
                            <div id="teacher-controls" style="display: none; width: 100%; display: flex; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
                                <button class="game-btn teacher-btn" id="pass-btn">Pass</button>
                                <div id="divisor-buttons"></div>
                            </div>
                        </div>

                        <button id="restart-btn" class="game-btn restart-btn">Restart</button>
                    </div>
                </div>
            </details>
        </section>

        <section>
            <h2>Examples</h2>

            <div class="example">
                <div class="example-title">Example: Reaching 20 (starting from 5)</div>
                <div class="game-visual">
                    <div class="circle">5</div>
                    <div class="step-action">Student adds 3</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">8</div>
                    <div class="step-action teacher-divide">üêç Teacher √∑ 4</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">3</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">3</div>
                    <div class="step-action">Student adds 2</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">5</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">5</div>
                    <div class="step-action">Student adds 2</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">7</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">7</div>
                    <div class="step-action">Student adds 4</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">11</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">11</div>
                    <div class="step-action">Student adds 2</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">13</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">13</div>
                    <div class="step-action">Student adds 4</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">17</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">17</div>
                    <div class="step-action">Student adds 2</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">19</div>
                    <div class="step-action teacher-pass">‚úÖ Teacher passes</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle">19</div>
                    <div class="step-action">Student adds 4</div>
                    <div class="arrow">‚Üì</div>
                    <div class="circle success">23</div>
                </div>
            </div>
        </section>

        <section>
            <h2>What To Expect</h2>
            <p>The student will quickly learn that certain numbers are "safe" while others allow the teacher to divide. Landing on safe numbers lets the student make steady progress.</p>
            <p>Helpful tip: The student should write down numbers from 1 to the target and cross off the ones they want to avoid (see the cheat sheet in The Math Behind It section below for an example). Through experimentation, they'll discover that some numbers like 2, 3, 5, 7, 11, 13 cannot be divided (they're safe!), while others like 4, 6, 8, 9, 10, 12 can be divided and should be avoided.</p>
        </section>

        <section>
            <h2>The Math Behind It</h2>
            <div class="concept">
                <p>This game teaches <strong>prime numbers</strong>. Prime numbers can only be divided by 1 and themselves, making them the "safe" numbers in this game.</p>

                <p>The "snakes and ladders" aspect comes from the ups and downs of play: adding numbers moves you toward the goal, while landing on composite numbers (non-primes) brings you back down.</p>

                <p>Through repeated play, students discover which numbers are prime by observing which ones cannot be divided. This hands-on approach helps build intuition about primes without memorization.</p>

                <p><strong>Example cheat sheet for reaching 30:</strong></p>
                <p class="cheat-sheet">
                    <span class="bad-number">1</span>
                    <span class="good-number">2</span>
                    <span class="good-number">3</span>
                    <span class="bad-number">4</span>
                    <span class="good-number">5</span>
                    <span class="bad-number">6</span>
                    <span class="good-number">7</span>
                    <span class="bad-number">8</span>
                    <span class="bad-number">9</span>
                    <span class="bad-number">10</span>
                    <span class="good-number">11</span>
                    <span class="bad-number">12</span>
                    <span class="good-number">13</span>
                    <span class="bad-number">14</span>
                    <span class="bad-number">15</span>
                    <span class="bad-number">16</span>
                    <span class="good-number">17</span>
                    <span class="bad-number">18</span>
                    <span class="good-number">19</span>
                    <span class="bad-number">20</span>
                    <span class="bad-number">21</span>
                    <span class="bad-number">22</span>
                    <span class="good-number">23</span>
                    <span class="bad-number">24</span>
                    <span class="bad-number">25</span>
                    <span class="bad-number">26</span>
                    <span class="bad-number">27</span>
                    <span class="bad-number">28</span>
                    <span class="good-number">29</span>
                    <span class="bad-number">30</span>
                </p>
            </div>
        </section>

        <section>
            <h2>Variation</h2>
            <div class="concept">
                <p>For a simpler version, try <a href="evens-odds.html">Evens & Odds (Snakes & Ladders Style Game)</a>, where the teacher can only divide by 2.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>Adolfo Rodriguez, 2025</p>
    </footer>

    <script>
        let currentNumber = 0;
        let targetNumber = 100;
        let isStudentTurn = true;
        let gameEnded = false;

        const currentNumberEl = document.getElementById('current-number');
        const targetNumberEl = document.getElementById('target-number');
        const turnDisplayEl = document.getElementById('turn-display');
        const gameControls = document.getElementById('game-controls');
        const teacherControls = document.getElementById('teacher-controls');
        const divisorButtonsContainer = document.getElementById('divisor-buttons');
        const passBtn = document.getElementById('pass-btn');
        const restartBtn = document.getElementById('restart-btn');
        const addBtns = document.querySelectorAll('.add-btn');

        function getNonTrivialDivisors(n) {
            if (n <= 1) return [];
            const divisors = [];
            for (let i = 2; i <= Math.sqrt(n); i++) {
                if (n % i === 0) {
                    divisors.push(i);
                    if (i !== n / i && n / i !== n) {
                        divisors.push(n / i);
                    }
                }
            }
            return divisors.sort((a, b) => a - b);
        }

        function updateDisplay() {
            currentNumberEl.textContent = currentNumber;
            targetNumberEl.textContent = targetNumber;

            if (gameEnded) {
                addBtns.forEach(btn => btn.style.display = 'none');
                teacherControls.style.display = 'none';
            } else if (isStudentTurn) {
                turnDisplayEl.textContent = "Student's turn";
                addBtns.forEach(btn => btn.style.display = 'inline-block');
                teacherControls.style.display = 'none';
            } else {
                turnDisplayEl.textContent = "Teacher's turn";
                addBtns.forEach(btn => btn.style.display = 'none');
                teacherControls.style.display = 'flex';

                // Generate divisor buttons
                const divisors = getNonTrivialDivisors(currentNumber);
                divisorButtonsContainer.innerHTML = '';
                divisors.forEach(divisor => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn teacher-btn';
                    btn.textContent = `√∑ ${divisor}`;
                    btn.addEventListener('click', () => divideBy(divisor));
                    divisorButtonsContainer.appendChild(btn);
                });
            }
        }

        function checkWinLose() {
            if (currentNumber >= targetNumber) {
                currentNumberEl.classList.add('success');
                currentNumberEl.classList.remove('failure');
                turnDisplayEl.textContent = 'Success!';
                gameEnded = true;
                updateDisplay();
            }
        }

        function addNumber(value) {
            if (gameEnded || !isStudentTurn) return;
            currentNumber += value;
            isStudentTurn = false;
            updateDisplay();
            checkWinLose();
        }

        function divideBy(divisor) {
            if (gameEnded || isStudentTurn) return;
            currentNumber = Math.floor(currentNumber / divisor);
            isStudentTurn = true;
            updateDisplay();
        }

        function pass() {
            if (gameEnded || isStudentTurn) return;
            isStudentTurn = true;
            updateDisplay();
        }

        function restart() {
            currentNumber = 0;
            isStudentTurn = true;
            gameEnded = false;
            currentNumberEl.classList.remove('success', 'failure');
            updateDisplay();
        }

        addBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const value = parseInt(btn.dataset.value);
                addNumber(value);
            });
        });

        passBtn.addEventListener('click', pass);
        restartBtn.addEventListener('click', restart);

        updateDisplay();
    </script>
</body>
</html>
