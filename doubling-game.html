<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Doubling Game - Math Games</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>The Doubling Game</h1>
    </header>

    <a href="index.html" class="back-link">← Back to games</a>

    <main>
        <section>
            <h2>How To Play</h2>
            <p>Start with the number 0 (zero). Players take turns:</p>
            <ul>
                <li><strong>Student's turn:</strong> Choose to skip or add 1</li>
                <li><strong>Teacher's turn:</strong> Multiply the current number by 2</li>
            </ul>
            <p>The goal is to reach a target number exactly—this is success! This can happen on either player's turn. If you go past the target, start over from 0 and try again.</p>
        </section>

        <section>
            <h2>Interactive Version</h2>
            <p>While this interactive version lets you practice the game, these games are most valuable when played with a teacher or parent. The guidance, encouragement, and mathematical discussion that happens during play cannot be replaced by a screen.</p>
            <noscript>
                <p style="color: #dc3545; font-weight: 600;">JavaScript is required to play this interactive game.</p>
            </noscript>
            <details>
                <summary>Show Interactive Game</summary>
                <div id="game-container">
                    <div class="interactive-game">
                        <div class="game-info">
                            <div class="target-display">
                                Target: <span id="target-number">10</span>
                                <div class="dice-buttons">
                                    <button id="dice-1-100" class="dice-btn">🎲 1-100</button>
                                    <button id="dice-101-1000" class="dice-btn">🎲 101-1000</button>
                                </div>
                            </div>
                            <div class="turn-display" id="turn-display">Student's turn</div>
                        </div>

                        <div id="current-number" class="circle interactive">0</div>

                        <div id="game-controls" class="game-controls">
                            <button id="add-btn" class="game-btn student-btn">Add 1</button>
                            <button id="skip-btn" class="game-btn student-btn">Skip</button>
                            <button id="multiply-btn" class="game-btn teacher-btn" style="display: none;">× 2</button>
                        </div>

                        <button id="restart-btn" class="game-btn restart-btn" style="display: none;">Restart</button>
                    </div>
                </div>
            </details>
        </section>

        <section>
            <h2>Examples</h2>

            <div class="example">
                <div class="example-title">Example 1: Failing to reach 10</div>
                <div class="game-visual">
                    <div class="circle">0</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">1</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">3</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">6</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">7</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle failure">14</div>
                </div>
                <p><em>Start over from 0 and try again.</em></p>
            </div>

            <div class="example">
                <div class="example-title">Example 2: Reaching 10</div>
                <div class="game-visual">
                    <div class="circle">0</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">1</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student skips</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">4</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">5</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle success">10</div>
                </div>
            </div>

            <div class="example">
                <div class="example-title">Example 3: Reaching 7</div>
                <div class="game-visual">
                    <div class="circle">0</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">1</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">3</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">6</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle success">7</div>
                </div>
            </div>

            <div class="example">
                <div class="example-title">Example 4: Reaching 12</div>
                <div class="game-visual">
                    <div class="circle">0</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">1</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student adds 1</div>
                    <div class="arrow">↓</div>
                    <div class="circle">3</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">6</div>
                    <div class="step-action">Student skips</div>
                    <div class="arrow">↓</div>
                    <div class="circle">6</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle success">12</div>
                </div>
            </div>
        </section>

        <section>
            <h2>What To Expect</h2>
            <p>The student may not reach the target on the first try, or the second, or even the third—but they will eventually succeed. Start with 10 as your first target. Once reached, try other numbers: 11, 15, 20, 100, or any number you like. As the student plays more, they may discover strategies to reach targets more quickly.</p>
        </section>

        <section>
            <h2>The Math Behind It</h2>
            <div class="concept">
                <p>This game teaches <strong>binary representation</strong>. The student's choices form a pattern: each "add 1" is a <strong>1</strong> and each "skip" is a <strong>0</strong>.</p>

                <p>For example, to reach 10:</p>
                <div class="game-visual">
                    <div class="circle">0</div>
                    <div class="step-action">Student adds 1 <span class="binary-digit">1</span></div>
                    <div class="arrow">↓</div>
                    <div class="circle">1</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Student skips <span class="binary-digit">0</span></div>
                    <div class="arrow">↓</div>
                    <div class="circle">2</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle">4</div>
                    <div class="step-action">Student adds 1 <span class="binary-digit">1</span></div>
                    <div class="arrow">↓</div>
                    <div class="circle">5</div>
                    <div class="step-action">Teacher × 2</div>
                    <div class="arrow">↓</div>
                    <div class="circle success">10</div>
                </div>

                <p style="text-align: center; margin-top: 1rem;"><span class="binary-digit" style="font-size: 1.2rem;">1 0 1</span> is the binary representation of the decimal number <strong>10</strong></p>

                <p>This means there is exactly <strong>one way</strong> to reach each target number. The student's choices represent that number in binary, the fundamental number system used in computing.</p>
            </div>
        </section>
    </main>

    <footer>
        <p>Adolfo Rodriguez, 2025</p>
    </footer>

    <script>
        let currentNumber = 0;
        let targetNumber = 10;
        let isStudentTurn = true;
        let gameEnded = false;

        const currentNumberEl = document.getElementById('current-number');
        const targetNumberEl = document.getElementById('target-number');
        const turnDisplayEl = document.getElementById('turn-display');
        const addBtn = document.getElementById('add-btn');
        const skipBtn = document.getElementById('skip-btn');
        const multiplyBtn = document.getElementById('multiply-btn');
        const restartBtn = document.getElementById('restart-btn');
        const gameControls = document.getElementById('game-controls');
        const dice1_100Btn = document.getElementById('dice-1-100');
        const dice101_1000Btn = document.getElementById('dice-101-1000');

        function updateDisplay() {
            currentNumberEl.textContent = currentNumber;
            targetNumberEl.textContent = targetNumber;

            if (gameEnded) {
                gameControls.style.display = 'none';
                restartBtn.style.display = 'block';
            } else if (isStudentTurn) {
                turnDisplayEl.textContent = "Student's turn";
                gameControls.style.display = 'flex';
                addBtn.style.display = 'inline-block';
                skipBtn.style.display = 'inline-block';
                multiplyBtn.style.display = 'none';
                restartBtn.style.display = 'none';
            } else {
                turnDisplayEl.textContent = "Teacher's turn";
                gameControls.style.display = 'flex';
                addBtn.style.display = 'none';
                skipBtn.style.display = 'none';
                multiplyBtn.style.display = 'inline-block';
                restartBtn.style.display = 'none';
            }
        }

        function checkWinLose() {
            if (currentNumber === targetNumber) {
                currentNumberEl.classList.add('success');
                currentNumberEl.classList.remove('failure');
                turnDisplayEl.textContent = 'Success!';
                gameEnded = true;
                updateDisplay();
            } else if (currentNumber > targetNumber) {
                currentNumberEl.classList.add('failure');
                currentNumberEl.classList.remove('success');
                turnDisplayEl.textContent = 'Over target - try again!';
                gameEnded = true;
                updateDisplay();
            }
        }

        addBtn.addEventListener('click', () => {
            if (gameEnded || !isStudentTurn) return;
            currentNumber += 1;
            isStudentTurn = false;
            updateDisplay();
            checkWinLose();
        });

        skipBtn.addEventListener('click', () => {
            if (gameEnded || !isStudentTurn) return;
            isStudentTurn = false;
            updateDisplay();
        });

        multiplyBtn.addEventListener('click', () => {
            if (gameEnded || isStudentTurn) return;
            currentNumber *= 2;
            isStudentTurn = true;
            updateDisplay();
            checkWinLose();
        });

        restartBtn.addEventListener('click', () => {
            currentNumber = 0;
            isStudentTurn = true;
            gameEnded = false;
            currentNumberEl.classList.remove('success', 'failure');
            updateDisplay();
        });

        function randomizeTarget(min, max) {
            targetNumber = Math.floor(Math.random() * (max - min + 1)) + min;
            currentNumber = 0;
            isStudentTurn = true;
            gameEnded = false;
            currentNumberEl.classList.remove('success', 'failure');
            updateDisplay();
        }

        dice1_100Btn.addEventListener('click', () => {
            randomizeTarget(1, 100);
        });

        dice101_1000Btn.addEventListener('click', () => {
            randomizeTarget(101, 1000);
        });

        updateDisplay();
    </script>
</body>
</html>
